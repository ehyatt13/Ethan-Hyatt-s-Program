<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Program</title>
	<script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<link href="css/default.css" rel="stylesheet" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>
<body>
	<script>
		$(document).ready(function () {
			console.log = function (message) {
				$('#console').append('<p>' + message + '</p>');
			};
		});
		</script>
	<div class="map"></div>
	<script>
		map = [
			'wwwwwwww   wwwwwwww',
			'w                 w',
			'w                 w',
			'w        c        w',
			'w                 w',
			'w                 w',
			'wwwwwwwwwwwwwwwwwww'
		];

		currentmap = map;

		map2 = [
			'wwwwwwww   wwwwwwww',
			'wwwwwwww   wwwwwwww',
			'wwwwwwww   wwwwwwww',
			'wwwwwwww   wwwwwwww',
			'wwwwwwww   wwwwwwww',
			'wwwwwwww   wwwwwwww',
			'wwwwwwww   wwwwwwww'
		];

		map3 = [
			'wwwwwwwwwwwwwwwwwww',
			'w                 w',
			'w                 w',
			'w                 w',
			'w                 w',
			'w                 w',
			'wwwwwwww   wwwwwwww'
		];


		var player_x = 9;
		var player_y = 5;

		mapupdate = function () {
			$('.map').find('*:not(".player")').remove();
			for (y = 0; y < currentmap.length; y++) {
				for (x = 0; x < currentmap[y].length; x++) {
					if (currentmap[y][x] == 'w') {
						$('.map').append('<div class="wall"></div>');
					} else if (currentmap[y][x] == ' ') {
						$('.map').append('<div class="floor"></div>');
					} else if (currentmap[y][x] == 'c') {
						$('.map').append('<div class="chest"></div>');
					} else if (currentmap[y][x] == 'o') {
						$('.map').append('<div class="empty"></div>');
					}
				}
			}
		};

		$(document).ready(function () {
			$('.map').append('<div class="player"></div>');
			for (y = 0; y < currentmap.length; y++) {
				for (x = 0; x < currentmap[y].length; x++) {
					if (currentmap[y][x] == 'w') {
						$('.map').append('<div class="wall"></div>');
					} else if (currentmap[y][x] == ' ') {
						$('.map').append('<div class="floor"></div>');
					} else if (currentmap[y][x] == 'c') {
						$('.map').append('<div class="chest"></div>');
					} else if (currentmap[y][x] == 'o') {
						$('.map').append('<div class="empty"></div>');
					}

				}
			}
			$('.player').css({ top: player_y * 70, left: player_x * 70, position: 'absolute' });

			$(document).keydown(function (event) {
				event.preventDefault();
				//console.log(event);
				//down
				if (event.keyCode == 40) {
					player_y = player_y + 1;
					mapupdate()
				}
				//up
				if (event.keyCode == 38) {
					player_y = player_y - 1;
					mapupdate()
				}
				//left
				if (event.keyCode == 37) {
					player_x = player_x - 1;
					mapupdate()
				}
				//right
				if (event.keyCode == 39) {
					player_x = player_x + 1;
					mapupdate()
				}
				//chest
				if (currentmap[player_y][player_x] == 'c') {
					currentmap[player_y][player_x] == 'o';
					console.log(currentmap[player_y][player_x])
					gain = Math.ceil(Math.random() * 3);
					console.log("You gained " + gain + " potions!");
					mapupdate()
				}
				if (currentmap == map && player_y == 0) {
					currentmap = map2;
					mapupdate()
					player_y == 6;
					player_x == player_x;
				}
				if (currentmap == map2 && player_y == 6) {
					currentmap = map;
					mapupdate()
					player_y == 0;
					player_x == player_x;
				}
				if (currentmap == map2 && player_y == 0) {
					currentmap = map3;
					player_y == 6;
					mapupdate()
					player_x == player_x;
				}
				if (currentmap == map3 && player_y == 6) {
					currentmap = map2;
					mapupdate()
					player_y == 0;
					player_x == player_x;
				}
				$('.player').animate({ top: player_y * 70, left: player_x * 70, position: 'absolute' }, { duration: 100 });
			});
		});</script>
	<div id="healthbar"><div id="health">HP</div></div>
	<div id="enemyhealthbar"><div id="enemyhealth">Enemy HP</div></div>
	<script>
		$(document).ready(function () {
			$('button').mouseenter(function () {
				$(this).fadeTo('fast', .5);
			});
			$('button').mouseleave(function () {
				$(this).fadeTo('fast', 1);
			});		
	});
	</script>
		<script src="js/main.js"></script>
		<button class="command" onclick="player1.attack()">Attack</button>
		<button class="command" onclick="player1.spell()">Magic</button>
		<button class="command" onclick="player1.potion(5)">Inventory</button>
		<button class="command" onclick="player1.run()">Escape</button>
		<div id="console"></div>
		<div class="alert alert-success" role="alert"></div>
	</body>
</html>
